{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Administrator\\\\Documents\\\\weatherappv4\\\\client\\\\src\\\\components\\\\UserInfo.js\";\nimport React, { useState } from \"react\";\nimport TextField from '@material-ui/core/TextField';\nimport { List, Button, ListItemText, CardContent } from \"@material-ui/core\";\nimport axios from \"axios\";\nimport Card from \"@material-ui/core/Card\";\nimport { makeStyles } from '@material-ui/core/styles';\n\nfunction UserInfo() {\n  const [userInfo, setUserInfo] = useState({\n    username: \"\",\n    locationPref: \"\",\n    success: false,\n    error: \"\"\n  });\n  const [weatherdata, setweatherdata] = useState({});\n\n  function search() {\n    const apikey = \"ba9faead36419b05538747acf541515b\";\n    const city = userInfo.locationPref;\n    const url = \"http://api.openweathermap.org/data/2.5/weather?q=\" + city + \"&APPID=\" + apikey;\n    axios.get(url).then(res => {\n      setweatherdata(res.data);\n    });\n  }\n\n  async function saveprefs() {\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Access-Control-Allow-Origin\": \"*\"\n      }\n    };\n    var body = {\n      username: userInfo.username,\n      locationPref: userInfo.locationPref\n    };\n    await axios.post(\"/users\", body, config).then(res => {\n      setUserInfo({ ...userInfo,\n        success: res.data.success\n      });\n      setUserInfo({ ...userInfo,\n        error: res.data.error\n      });\n    });\n    search();\n  }\n\n  function handleUsernameChange(input) {\n    setUserInfo({ ...userInfo,\n      username: input\n    });\n  }\n\n  function handleLocationPrefChange(input) {\n    setUserInfo({ ...userInfo,\n      locationPref: input\n    });\n  }\n\n  const useStyles = makeStyles({\n    card: {\n      display: \"\",\n      minWidth: \"10px\",\n      minHeight: \"10px\",\n      maxWidth: \"400px\",\n      margin: \"50px\"\n    },\n    textfield: {\n      margin: \"10px\"\n    },\n    SignInForm: {\n      margin: \"12px\"\n    }\n  });\n  const classes = useStyles();\n\n  function ifSuccess() {\n    if (userInfo.success === true) {\n      if (weatherdata.name !== undefined) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(List, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(ListItemText, {\n          primary: \" Weather in \" + weatherdata.name + \", \" + weatherdata.sys.country + \":\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 29\n          }\n        }), /*#__PURE__*/React.createElement(ListItemText, {\n          primary: \"Humidity: \" + weatherdata.main.humidity + \"%\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 29\n          }\n        }), /*#__PURE__*/React.createElement(ListItemText, {\n          primary: \"Wind Speed: \" + weatherdata.wind.speed + \",  Bearing: \" + weatherdata.wind.deg + \"°\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 29\n          }\n        })), /*#__PURE__*/React.createElement(Button, {\n          variant: \"contained\",\n          color: \"primary\",\n          onClick: () => {\n            saveprefs();\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 25\n          }\n        }, \"Log out\"));\n      } else {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(Button, {\n          variant: \"contained\",\n          color: \"primary\",\n          onClick: () => {\n            saveprefs();\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 25\n          }\n        }, \"Log out\"));\n      }\n    } else if (userInfo.success === false) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"form\", {\n        className: classes.SignInForm,\n        noValidate: true,\n        autoComplete: \"off\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(TextField, {\n        id: \"standard-basic\",\n        label: \"Username\",\n        onChange: event => handleUsernameChange(event.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(TextField, {\n        id: \"standard-basic\",\n        label: \"Home City\",\n        onChange: event => handleLocationPrefChange(event.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(Button, {\n        variant: \"contained\",\n        color: \"primary\",\n        onClick: () => {\n          saveprefs();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 21\n        }\n      }, \"Save Preferences\"));\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    className: classes.card,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(CardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 17\n    }\n  }, ifSuccess())));\n}\n\nexport default UserInfo;","map":{"version":3,"sources":["C:/Users/Administrator/Documents/weatherappv4/client/src/components/UserInfo.js"],"names":["React","useState","TextField","List","Button","ListItemText","CardContent","axios","Card","makeStyles","UserInfo","userInfo","setUserInfo","username","locationPref","success","error","weatherdata","setweatherdata","search","apikey","city","url","get","then","res","data","saveprefs","config","headers","body","post","handleUsernameChange","input","handleLocationPrefChange","useStyles","card","display","minWidth","minHeight","maxWidth","margin","textfield","SignInForm","classes","ifSuccess","name","undefined","sys","country","main","humidity","wind","speed","deg","event","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport TextField from '@material-ui/core/TextField';\r\nimport { List, Button, ListItemText, CardContent } from \"@material-ui/core\";\r\nimport axios from \"axios\";\r\nimport Card from \"@material-ui/core/Card\";\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nfunction UserInfo() {\r\n\r\n    const [userInfo, setUserInfo] = useState({ username: \"\", locationPref: \"\", success: false, error: \"\" });\r\n    const [weatherdata, setweatherdata] = useState({});\r\n\r\n    function search() {\r\n        const apikey = \"ba9faead36419b05538747acf541515b\";\r\n        const city = userInfo.locationPref;\r\n        const url = \"http://api.openweathermap.org/data/2.5/weather?q=\" + city + \"&APPID=\" + apikey;\r\n        axios.get(url)\r\n            .then(res => {\r\n                setweatherdata(res.data);\r\n            })\r\n    }\r\n\r\n    async function saveprefs() {\r\n\r\n        const config = {\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Access-Control-Allow-Origin\": \"*\"\r\n            }\r\n        }\r\n        var body = {\r\n            username: userInfo.username,\r\n            locationPref: userInfo.locationPref\r\n        }\r\n        await axios.post(\"/users\", body, config)\r\n            .then(res => {\r\n                setUserInfo({ ...userInfo, success: res.data.success })\r\n                setUserInfo({ ...userInfo, error: res.data.error })\r\n            })\r\n        search()\r\n\r\n    }\r\n\r\n    function handleUsernameChange(input) {\r\n        setUserInfo({ ...userInfo, username: input })\r\n    }\r\n\r\n    function handleLocationPrefChange(input) {\r\n        setUserInfo({ ...userInfo, locationPref: input })\r\n    }\r\n\r\n    const useStyles = makeStyles({\r\n        card: {\r\n\r\n            display: \"\",\r\n            minWidth: \"10px\",\r\n            minHeight: \"10px\",\r\n            maxWidth: \"400px\",\r\n            margin: \"50px\",\r\n\r\n        },\r\n        textfield: {\r\n            margin: \"10px\",\r\n\r\n        },\r\n\r\n        SignInForm: {\r\n            margin: \"12px\",\r\n        }\r\n\r\n    });\r\n    const classes = useStyles()\r\n\r\n\r\n    function ifSuccess() {\r\n        if (userInfo.success === true) {\r\n            if (weatherdata.name !== undefined) {\r\n                return (\r\n                    <div>\r\n                        <List  >\r\n                            <ListItemText primary={\" Weather in \" + weatherdata.name + \", \" + weatherdata.sys.country + \":\"} />\r\n                            <ListItemText primary={\"Humidity: \" + weatherdata.main.humidity + \"%\"} />\r\n                            <ListItemText primary={\"Wind Speed: \" + weatherdata.wind.speed + \",  Bearing: \" + weatherdata.wind.deg + \"°\"} />\r\n                        </List>\r\n                        <Button variant=\"contained\" color=\"primary\"\r\n                            onClick={() => { saveprefs() }}\r\n                        >\r\n                            Log out\r\n                    </Button>\r\n                    </div>\r\n\r\n\r\n                )\r\n            } else {\r\n                return(\r\n                    <div>\r\n                        <Button variant=\"contained\" color=\"primary\"\r\n                        onClick={() => { saveprefs() }}\r\n                    >\r\n                        Log out\r\n                    </Button>\r\n                    </div>\r\n                )\r\n            }\r\n\r\n\r\n\r\n        } else if (userInfo.success === false) {\r\n            return (\r\n                <div>\r\n\r\n                    <form className={classes.SignInForm} noValidate autoComplete=\"off\">\r\n                        <TextField id=\"standard-basic\" label=\"Username\"\r\n                            onChange={(event) => handleUsernameChange(event.target.value)}\r\n                        />\r\n\r\n\r\n                        <TextField id=\"standard-basic\" label=\"Home City\"\r\n                            onChange={(event) => handleLocationPrefChange(event.target.value)}\r\n                        />\r\n\r\n\r\n                    </form>\r\n                    <Button variant=\"contained\" color=\"primary\"\r\n                        onClick={() => { saveprefs() }}\r\n                    >\r\n                        Save Preferences\r\n                    </Button>\r\n                </div>\r\n            )\r\n\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Card className={classes.card}>\r\n                <CardContent>\r\n                    {ifSuccess()}\r\n                </CardContent>\r\n            </Card>\r\n\r\n        </div>\r\n\r\n    )\r\n\r\n}\r\n\r\nexport default UserInfo;"]},"metadata":{},"sourceType":"module"}