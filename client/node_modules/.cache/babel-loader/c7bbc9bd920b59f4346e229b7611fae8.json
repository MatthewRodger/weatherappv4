{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Administrator\\\\Documents\\\\weatherappv4\\\\client\\\\src\\\\components\\\\WeatherSearch.js\";\nimport React, { useState } from \"react\";\nimport TextField from '@material-ui/core/TextField';\nimport AppBar from \"@material-ui/core/AppBar\";\nimport { Typography, ListItemText, IconButton, Button, CardContent } from \"@material-ui/core\";\nimport List from '@material-ui/core/List';\nimport axios from \"axios\";\nimport Card from \"@material-ui/core/Card\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport searchGlass from \"./pngs/icons8-search-64.png\";\n\nfunction WeatherSearch() {\n  const [weatherdata, setweatherdata] = useState({});\n  const [userInfo, setUserInfo] = useState({\n    username: \"\",\n    locationPref: \"\",\n    success: false,\n    error: \"\"\n  });\n  const [searchedcity, setsearchedcity] = useState(userInfo.locationPref);\n\n  function search() {\n    const apikey = \"ba9faead36419b05538747acf541515b\";\n    const city = searchedcity;\n    const url = \"http://api.openweathermap.org/data/2.5/weather?q=\" + city + \"&APPID=\" + apikey;\n    axios.get(url).then(res => {\n      setweatherdata(res.data);\n    });\n  }\n\n  async function saveprefs() {\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Access-Control-Allow-Origin\": \"*\"\n      }\n    };\n    var body = {\n      username: userInfo.username,\n      locationPref: userInfo.locationPref\n    };\n    await axios.post(\"/users\", body, config).then(res => {\n      setUserInfo({ ...userInfo,\n        success: res.success\n      });\n      setUserInfo({ ...userInfo,\n        error: res.error\n      });\n    });\n  }\n\n  const handleKeyDown = event => {\n    if (event.key === 'Enter') {\n      search();\n    }\n  };\n\n  function handleUsernameChange(input) {\n    setUserInfo({ ...userInfo,\n      username: input\n    });\n  }\n\n  function handleLocationPrefChange(input) {\n    setUserInfo({ ...userInfo,\n      locationPref: input\n    });\n  }\n\n  function capital_letter(str) {\n    str = str.split(\" \");\n\n    for (var i = 0, x = str.length; i < x; i++) {\n      str[i] = str[i][0].toUpperCase() + str[i].substr(1);\n    }\n\n    return str.join(\" \");\n  }\n\n  const useStyles = makeStyles({\n    card: {\n      display: \"\",\n      minWidth: \"10px\",\n      minHeight: \"10px\",\n      maxWidth: \"400px\",\n      margin: \"50px\"\n    },\n    textfield: {\n      margin: \"10px\"\n    },\n    searchButton: {\n      display: \"block\"\n    },\n    Icon: {},\n    tempMain: {},\n    Info: {},\n    SignInForm: {\n      margin: \"12px\"\n    }\n  });\n  const classes = useStyles();\n  var displayedList = \"\";\n  var displayedIcon = \"\";\n  var displayedTemp = \"\";\n\n  if (weatherdata.name !== undefined && searchedcity !== undefined) {\n    displayedTemp = /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.tempMain,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      variant: \"h3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 13\n      }\n    }, Math.round(weatherdata.main.temp - 273.15) + \"째C\"), /*#__PURE__*/React.createElement(Typography, {\n      variant: \"h6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 13\n      }\n    }, capital_letter(weatherdata.weather[0].description)));\n    displayedList = /*#__PURE__*/React.createElement(List, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(ListItemText, {\n      primary: \" Weather in \" + weatherdata.name + \", \" + weatherdata.sys.country + \":\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(ListItemText, {\n      primary: \"Humidity: \" + weatherdata.main.humidity + \"%\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(ListItemText, {\n      primary: \"Wind Speed: \" + weatherdata.wind.speed + \",  Bearing: \" + weatherdata.wind.deg + \"째\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 13\n      }\n    }));\n\n    switch (weatherdata.weather[0].icon) {\n      case \"01d\":\n        {\n          displayedIcon = \"http://openweathermap.org/img/wn/01d@2x.png\";\n          break;\n        }\n\n      case \"02d\":\n        {\n          displayedIcon = \"http://openweathermap.org/img/wn/02d@2x.png\";\n          break;\n        }\n\n      case \"03d\":\n        {\n          displayedIcon = \"http://openweathermap.org/img/wn/03d@2x.png\";\n          break;\n        }\n\n      case \"04d\":\n        {\n          displayedIcon = \"http://openweathermap.org/img/wn/04d@2x.png\";\n          break;\n        }\n\n      case \"09d\":\n        {\n          displayedIcon = \"http://openweathermap.org/img/wn/04d@2x.png\";\n          break;\n        }\n\n      case \"10d\":\n        {\n          displayedIcon = \"http://openweathermap.org/img/wn/04d@2x.png\";\n          break;\n        }\n\n      case \"11d\":\n        {\n          displayedIcon = \"http://openweathermap.org/img/wn/04d@2x.png\";\n          break;\n        }\n\n      case \"12d\":\n        {\n          displayedIcon = \"http://openweathermap.org/img/wn/04d@2x.png\";\n          break;\n        }\n\n      case \"50d\":\n        {\n          displayedIcon = \"http://openweathermap.org/img/wn/04d@2x.png\";\n          break;\n        }\n\n      default:\n        {\n          displayedIcon = \"http://openweathermap.org/img/wn/10d@2x.png\";\n        }\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"WeatherSearch\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(AppBar, {\n    position: \"static\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h6\",\n    className: \"AppBar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 21\n    }\n  }, \"Weather App\")), /*#__PURE__*/React.createElement(Card, {\n    className: classes.card,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(CardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    className: classes.textfield,\n    top: \"50%\",\n    id: \"textinput\",\n    label: \"Search A City\",\n    variant: \"outlined\",\n    onChange: event => {\n      const {\n        value\n      } = event.target;\n      setsearchedcity(value);\n    },\n    onKeyDown: handleKeyDown,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(IconButton, {\n    className: classes.searchButton,\n    onClick: () => search(),\n    \"aria-label\": \"Search Weather\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: searchGlass,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(CardContent, {\n    className: classes.Icon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: displayedIcon,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 25\n    }\n  }), displayedTemp), /*#__PURE__*/React.createElement(CardContent, {\n    className: classes.Info,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 21\n    }\n  }, displayedList)), /*#__PURE__*/React.createElement(UserInfo, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 17\n    }\n  })));\n}\n\nexport default WeatherSearch;","map":{"version":3,"sources":["C:/Users/Administrator/Documents/weatherappv4/client/src/components/WeatherSearch.js"],"names":["React","useState","TextField","AppBar","Typography","ListItemText","IconButton","Button","CardContent","List","axios","Card","makeStyles","searchGlass","WeatherSearch","weatherdata","setweatherdata","userInfo","setUserInfo","username","locationPref","success","error","searchedcity","setsearchedcity","search","apikey","city","url","get","then","res","data","saveprefs","config","headers","body","post","handleKeyDown","event","key","handleUsernameChange","input","handleLocationPrefChange","capital_letter","str","split","i","x","length","toUpperCase","substr","join","useStyles","card","display","minWidth","minHeight","maxWidth","margin","textfield","searchButton","Icon","tempMain","Info","SignInForm","classes","displayedList","displayedIcon","displayedTemp","name","undefined","Math","round","main","temp","weather","description","sys","country","humidity","wind","speed","deg","icon","value","target"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport TextField from '@material-ui/core/TextField';\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport { Typography, ListItemText, IconButton, Button, CardContent } from \"@material-ui/core\";\r\nimport List from '@material-ui/core/List';\r\nimport axios from \"axios\";\r\nimport Card from \"@material-ui/core/Card\";\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport searchGlass from \"./pngs/icons8-search-64.png\";\r\n\r\nfunction WeatherSearch() {\r\n    const [weatherdata, setweatherdata] = useState({});\r\n    const [userInfo, setUserInfo] = useState({ username: \"\", locationPref: \"\", success: false, error: \"\" });\r\n    const [searchedcity, setsearchedcity] = useState(userInfo.locationPref);\r\n\r\n    function search() {\r\n        const apikey = \"ba9faead36419b05538747acf541515b\";\r\n        const city = searchedcity;\r\n        const url = \"http://api.openweathermap.org/data/2.5/weather?q=\" + city + \"&APPID=\" + apikey;\r\n        axios.get(url)\r\n            .then(res => {\r\n                setweatherdata(res.data);\r\n            })\r\n    }\r\n\r\n\r\n\r\n    async function saveprefs() {\r\n        const config = {\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Access-Control-Allow-Origin\": \"*\"\r\n            }\r\n        }\r\n        var body = {\r\n            username: userInfo.username,\r\n            locationPref: userInfo.locationPref\r\n        }\r\n\r\n        await axios.post(\"/users\", body, config)\r\n            .then(res => {\r\n                setUserInfo({ ...userInfo, success: res.success })\r\n                setUserInfo({ ...userInfo, error: res.error })\r\n            })\r\n\r\n    }\r\n\r\n    const handleKeyDown = (event) => {\r\n        if (event.key === 'Enter') {\r\n            search();\r\n        }\r\n    }\r\n\r\n    function handleUsernameChange(input) {\r\n        setUserInfo({ ...userInfo, username: input })\r\n    }\r\n\r\n    function handleLocationPrefChange(input) {\r\n        setUserInfo({ ...userInfo, locationPref: input })\r\n    }\r\n\r\n\r\n    function capital_letter(str) {\r\n        str = str.split(\" \");\r\n\r\n        for (var i = 0, x = str.length; i < x; i++) {\r\n            str[i] = str[i][0].toUpperCase() + str[i].substr(1);\r\n        }\r\n\r\n        return str.join(\" \");\r\n    }\r\n\r\n\r\n\r\n    const useStyles = makeStyles({\r\n        card: {\r\n\r\n            display: \"\",\r\n            minWidth: \"10px\",\r\n            minHeight: \"10px\",\r\n            maxWidth: \"400px\",\r\n            margin: \"50px\",\r\n\r\n        },\r\n        textfield: {\r\n            margin: \"10px\",\r\n\r\n        },\r\n        searchButton: {\r\n            display: \"block\",\r\n\r\n        },\r\n        Icon: {\r\n\r\n        },\r\n        tempMain: {\r\n\r\n        },\r\n        Info: {\r\n\r\n        },\r\n        SignInForm: {\r\n            margin: \"12px\",\r\n        }\r\n\r\n    });\r\n    const classes = useStyles()\r\n\r\n\r\n\r\n\r\n    var displayedList = \"\";\r\n    var displayedIcon = \"\";\r\n    var displayedTemp = \"\";\r\n\r\n    if ((weatherdata.name !== undefined) && (searchedcity !== undefined)) {\r\n        displayedTemp = <div className={classes.tempMain}>\r\n\r\n            <Typography variant=\"h3\">\r\n                {Math.round(weatherdata.main.temp - 273.15) + \"째C\"}\r\n\r\n            </Typography>\r\n\r\n            <Typography variant=\"h6\">\r\n                {capital_letter(weatherdata.weather[0].description)}\r\n            </Typography>\r\n        </div>\r\n        displayedList = <List  >\r\n            <ListItemText primary={\" Weather in \" + weatherdata.name + \", \" + weatherdata.sys.country + \":\"} />\r\n            <ListItemText primary={\"Humidity: \" + weatherdata.main.humidity + \"%\"} />\r\n            <ListItemText primary={\"Wind Speed: \" + weatherdata.wind.speed + \",  Bearing: \" + weatherdata.wind.deg + \"째\"} />\r\n        </List>\r\n\r\n\r\n\r\n        switch (weatherdata.weather[0].icon) {\r\n            case (\"01d\"): {\r\n                displayedIcon = \"http://openweathermap.org/img/wn/01d@2x.png\"\r\n                break;\r\n            }\r\n\r\n            case (\"02d\"): {\r\n                displayedIcon = \"http://openweathermap.org/img/wn/02d@2x.png\"\r\n                break;\r\n            }\r\n\r\n            case (\"03d\"): {\r\n                displayedIcon = \"http://openweathermap.org/img/wn/03d@2x.png\"\r\n                break;\r\n            }\r\n\r\n            case (\"04d\"): {\r\n                displayedIcon = \"http://openweathermap.org/img/wn/04d@2x.png\"\r\n                break;\r\n            }\r\n            case (\"09d\"): {\r\n                displayedIcon = \"http://openweathermap.org/img/wn/04d@2x.png\"\r\n                break;\r\n            }\r\n            case (\"10d\"): {\r\n                displayedIcon = \"http://openweathermap.org/img/wn/04d@2x.png\"\r\n                break;\r\n            }\r\n            case (\"11d\"): {\r\n                displayedIcon = \"http://openweathermap.org/img/wn/04d@2x.png\"\r\n                break;\r\n            }\r\n            case (\"12d\"): {\r\n                displayedIcon = \"http://openweathermap.org/img/wn/04d@2x.png\"\r\n                break;\r\n            }\r\n            case (\"50d\"): {\r\n                displayedIcon = \"http://openweathermap.org/img/wn/04d@2x.png\"\r\n                break;\r\n            }\r\n\r\n            default: {\r\n                displayedIcon = \"http://openweathermap.org/img/wn/10d@2x.png\"\r\n            }\r\n\r\n\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"WeatherSearch\">\r\n            <div>\r\n                <AppBar position=\"static\">\r\n                    <Typography variant=\"h6\" className=\"AppBar\">\r\n                        Weather App\r\n                    </Typography>\r\n                </AppBar>\r\n                <Card className={classes.card} >\r\n                    <CardContent>\r\n                        <TextField\r\n                            className={classes.textfield}\r\n                            top=\"50%\"\r\n                            id=\"textinput\"\r\n                            label=\"Search A City\"\r\n                            variant=\"outlined\"\r\n                            onChange={event => {\r\n                                const { value } = event.target;\r\n                                setsearchedcity(value)\r\n                            }}\r\n                            onKeyDown={handleKeyDown}\r\n                        />\r\n                        <IconButton\r\n                            className={classes.searchButton}\r\n                            onClick={() => search()}\r\n                            aria-label=\"Search Weather\"\r\n                        >\r\n                            <img src={searchGlass} alt=\"\" />\r\n                        </IconButton>\r\n                    </CardContent>\r\n\r\n                    <CardContent className={classes.Icon} >\r\n\r\n                        <img src={displayedIcon} alt=\"\" />\r\n                        {displayedTemp}\r\n\r\n                    </CardContent>\r\n\r\n                    <CardContent className={classes.Info} >\r\n                        {displayedList}\r\n                    </CardContent>\r\n\r\n\r\n                </Card>\r\n                <UserInfo></UserInfo>\r\n\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nexport default WeatherSearch;"]},"metadata":{},"sourceType":"module"}